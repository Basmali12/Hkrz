<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHOST TOOLS - Ultimate Simulator V20</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- الأساسيات والتصميم العام --- */
        :root { --primary: #0f0; --bg: #050505; --panel: #111; }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); display: flex; flex-direction: column; min-height: 100vh; width: 100vw; font-family: 'Cairo', sans-serif; overflow-x: hidden; color: #fff; }

        /* تأثير الشاشة */
        .scanline { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 999; pointer-events: none; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2)); background-size: 100% 4px; animation: scanMove 10s linear infinite; }
        @keyframes scanMove { 0% { background-position: 0 0; } 100% { background-position: 0 100%; } }

        /* Header */
        .app-header { padding: 15px 20px; background: #000; border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; z-index: 10; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .neon-text { text-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary); }
        
        /* Footer */
        .hacker-footer { position: fixed; bottom: 0; left: 0; width: 100%; background: #000; border-top: 1px solid var(--primary); color: var(--primary); padding: 5px; font-family: 'Courier Prime', monospace; font-size: 10px; display: flex; justify-content: space-between; padding-left: 15px; padding-right: 15px; z-index: 50; }

        /* Screens */
        .screen { flex: 1; display: none; flex-direction: column; padding: 20px; width: 100%; overflow-y: auto; padding-bottom: 80px; opacity: 0; transition: opacity 0.3s ease; }
        .active-screen { display: flex; opacity: 1; }

        /* القائمة الرئيسية */
        .main-menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .menu-card { background: linear-gradient(145deg, #111, #0a0a0a); border: 1px solid #333; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 120px; position: relative; overflow: hidden; }
        .menu-card:active { transform: scale(0.95); box-shadow: inset 0 0 10px #000; }
        
        /* ألوان الكروت */
        .wa-card { border-color: #0f0; color: #0f0; } 
        .fb-card { border-color: #1877f2; color: #1877f2; }
        .tg-card { border-color: #229ED9; color: #229ED9; }
        .ig-card { border-color: #C13584; color: #C13584; }
        .wifi-card { border-color: #00f; color: #00f; } 
        .phone-card { border-color: #e67e22; color: #e67e22; }
        .app-hack-card { grid-column: span 2; border-color: #9b59b6; color: #9b59b6; height: 90px; flex-direction: row; gap: 20px; }

        /* Controls */
        .hacker-btn { width: 100%; padding: 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 14px; text-transform: uppercase; margin-bottom: 10px; font-family: 'Cairo', sans-serif; position: relative; overflow: hidden; }
        .hacker-input { width: 100%; padding: 15px; background: #000; border: 1px solid #444; color: #fff; font-family: 'Courier Prime', monospace; font-size: 16px; text-align: center; border-radius: 4px; margin-bottom: 15px; transition: 0.3s; }
        
        /* Tools Lists */
        .control-card { background: #0f0f0f; border-right: 3px solid #333; border-radius: 5px; padding: 15px; margin-bottom: 8px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 13px; font-weight: bold; color: #aaa; transition: 0.2s; }
        .control-card:active { background: #222; }
        .control-card i { font-size: 16px; margin-left: 10px; }

        /* Terminals */
        .attack-terminal { background: rgba(0,0,0,0.9); font-family: 'Courier Prime', monospace; flex: 1; display: flex; flex-direction: column; overflow: hidden; padding: 15px; border: 1px solid #333; margin-bottom: 10px; border-radius: 5px; }
        .attack-logs { flex: 1; overflow-y: auto; font-size: 11px; color: #ccc; display: flex; flex-direction: column; justify-content: flex-end; }
        .attack-progress-box { padding: 5px; background: #000; border: 1px solid #333; border-radius: 20px; height: 15px; display: flex; align-items: center; }
        .attack-fill { height: 100%; width: 0%; border-radius: 20px; transition: width 0.1s linear; }

        /* المميزات المجانية (الشبكة الخضراء) */
        .features-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .free-feature-card { background: rgba(0, 255, 0, 0.05); border: 1px solid #0f0; border-radius: 8px; padding: 12px 5px; text-align: center; color: #fff; font-size: 11px; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 0 5px rgba(0, 255, 0, 0.1); }
        .free-feature-card i { font-size: 20px; color: #0f0; }

        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 200; display: none; justify-content: center; align-items: center; flex-direction: column; backdrop-filter: blur(5px); }
        .modal-box { width: 90%; max-width: 400px; background: #111; border: 1px solid #333; border-radius: 10px; padding: 25px; text-align: center; position: relative; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        
        /* التحريك */
        .glitch-effect { animation: quickGlitch 0.2s ease-in-out; }
        @keyframes quickGlitch { 0% { transform: translate(2px, 0); } 50% { transform: translate(-2px, 0); } 100% { transform: translate(0, 0); } }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Buttons Colors */
        .btn-green { background: rgba(0,255,0,0.1); border: 1px solid #0f0; color: #0f0; }
        .btn-red { background: rgba(255,0,0,0.1); border: 1px solid #f00; color: #f00; }
        .btn-blue { background: rgba(0,0,255,0.1); border: 1px solid #00f; color: #55f; }
        .btn-orange { background: rgba(230, 126, 34, 0.1); border: 1px solid #e67e22; color: #e67e22; }

        /* Toast */
        .toast-msg { position: fixed; top: -60px; left: 50%; transform: translateX(-50%); background: #111; color: #fff; padding: 12px 25px; border-radius: 4px; font-size: 13px; z-index: 300; transition: 0.5s; white-space: nowrap; border-bottom: 2px solid #fff; box-shadow: 0 5px 20px #000; }

        /* Payment Frame */
        .payment-iframe-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 250; display: none; flex-direction: column; }
        iframe { width: 100%; flex: 1; border: none; }
    </style>
</head>
<body>

    <div class="scanline"></div>
    <div id="toast" class="toast-msg">...</div>

    <div class="app-header">
        <span class="neon-text" style="color:#fff;">GHOST<span style="color:#0f0;">TOOLS</span></span>
        <div style="font-size:10px; color:#aaa; text-align:left;">
            <div>VER 20.0</div>
            <div id="vip-badge" style="color:#333;">FREE USER</div>
        </div>
    </div>
    
    <div id="screen-main" class="screen active-screen">
        <div style="text-align: center; margin: 20px 0;">
            <i class="fas fa-biohazard" style="font-size: 60px; color: #fff; animation: pulse 3s infinite;"></i>
            <h2 style="color: #fff; margin-top: 15px; letter-spacing: 3px;">SYSTEM READY</h2>
        </div>
        
        <div class="main-menu-grid">
            <div class="menu-card wa-card" onclick="goToScreen('screen-wa-menu')">
                <i class="fab fa-whatsapp menu-icon"></i><div class="menu-title">WhatsApp</div>
            </div>
            <div class="menu-card fb-card" onclick="showToast('الخدمة تحت الصيانة', '#333')">
                <i class="fab fa-facebook-f menu-icon"></i><div class="menu-title">Facebook</div>
            </div>
            <div class="menu-card wifi-card" onclick="goToScreen('screen-wifi-input')">
                <i class="fas fa-wifi menu-icon"></i><div class="menu-title">Wi-Fi Hack</div>
            </div>
            <div class="menu-card phone-card" onclick="goToScreen('screen-phone-input')">
                <i class="fas fa-mobile-alt menu-icon"></i><div class="menu-title">Phone Track</div>
            </div>
            
            <div class="menu-card app-hack-card" onclick="goToScreen('screen-app-hack')">
                <i class="fas fa-users-cog menu-icon"></i>
                <div class="menu-title" style="text-align: right;">
                    <div style="font-size: 15px;">تطبيق الاختراق</div>
                    <div style="font-size: 10px; opacity:0.7;">(Rat) Admin + Payload</div>
                </div>
            </div>
        </div>
    </div>

    <div id="screen-wa-menu" class="screen">
        <i class="fas fa-arrow-left" style="align-self: flex-end; font-size: 20px; cursor: pointer;" onclick="goToScreen('screen-main')"></i>
        <div style="text-align: center; margin-bottom: 30px;"><i class="fab fa-whatsapp" style="font-size: 50px; color: #0f0;"></i><h2 style="color: #fff;">WHATSAPP</h2></div>
        
        <button class="hacker-btn btn-green" onclick="goToScreen('screen-spy-input')">مراقبة المحادثات <i class="fas fa-eye"></i></button>
        <button class="hacker-btn btn-red" onclick="goToScreen('screen-ban-input')">حظر الرقم (Banned) <i class="fas fa-ban"></i></button>
    </div>

    <div id="screen-spy-input" class="screen" style="justify-content:center;">
        <i class="fas fa-arrow-left" style="position:absolute; top:20px; right:20px; font-size:20px;" onclick="goToScreen('screen-wa-menu')"></i>
        <i class="fas fa-user-secret" style="font-size:50px; color:#0f0; margin:0 auto 20px;"></i>
        <input type="tel" id="spy-number" class="hacker-input" placeholder="رقم الضحية">
        <button class="hacker-btn btn-green" onclick="prepareTarget('spy')">بدء المراقبة</button>
    </div>

    <div id="screen-ban-input" class="screen" style="justify-content:center;">
        <i class="fas fa-arrow-left" style="position:absolute; top:20px; right:20px; font-size:20px;" onclick="goToScreen('screen-wa-menu')"></i>
        <i class="fas fa-skull" style="font-size:50px; color:#f00; margin:0 auto 20px;"></i>
        <input type="tel" id="ban-number" class="hacker-input" placeholder="رقم الضحية">
        <button class="hacker-btn btn-red" onclick="prepareTarget('ban')">تدمير الحساب</button>
    </div>

    <div id="screen-wifi-input" class="screen">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <h2 style="color:#00f;"><i class="fas fa-wifi"></i> WI-FI</h2>
            <i class="fas fa-arrow-left" onclick="goToScreen('screen-main')"></i>
        </div>
        
        <button class="hacker-btn" style="border: 1px dashed #00f; color:#00f;" onclick="searchWifi()">
            <i class="fas fa-satellite-dish"></i> فحص المحيط (Scan)
        </button>
        
        <div id="wifi-list" style="margin: 15px 0; display:none;">
            <div class="control-card" onclick="selectWifi(this, 'Home_Wifi_5G')"><span style="color:#fff">Home_Wifi_5G</span> <span style="color:#f00">-80db</span></div>
            <div class="control-card" onclick="selectWifi(this, 'TP-Link_Ax20')"><span style="color:#fff">TP-Link_Ax20</span> <span style="color:#f00">-40db</span></div>
        </div>

        <button class="hacker-btn btn-blue" onclick="startWifiHack()">بدء الهجوم (WPA2)</button>

        <h3 style="color:#555; font-size: 10px; margin: 20px 0 5px;">ROOT PERMISSIONS:</h3>
        <div class="control-card" onclick="checkVipFeature('linked')"><span style="color:#fff"><i class="fas fa-network-wired" style="color:#00f"></i> الأجهزة المرتبطة</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('kill')"><span style="color:#fff"><i class="fas fa-wifi" style="color:#00f"></i> قطع الإنترنت (Kill)</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('images')"><span style="color:#fff"><i class="fas fa-images" style="color:#00f"></i> سحب الصور</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('pass')"><span style="color:#fff"><i class="fas fa-key" style="color:#00f"></i> كلمات السر</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('destroy')"><span style="color:#fff"><i class="fas fa-bomb" style="color:#00f"></i> تدمير الراوتر</span><i class="fas fa-lock"></i></div>
    </div>

    <div id="screen-wifi-sim" class="screen" style="padding: 0; background:#000;">
        <div style="padding: 10px; background: #000033; border-bottom: 1px solid #00f; display:flex; justify-content:space-between;">
            <span style="color:#fff;">TERMINAL: <span id="wifi-target-name">...</span></span>
            <span style="color:#00f; animation:blink 1s infinite;">● REC</span>
        </div>
        <div class="attack-terminal" style="border:none; border-bottom:1px solid #00f;">
            <div id="wifi-logs" class="attack-logs" style="color:#00f;"></div>
        </div>
        <div style="padding:20px;">
            <div class="attack-progress-box" style="border-color:#00f;">
                <div id="wifi-fill" class="attack-fill" style="background: #00f; box-shadow: 0 0 10px #00f;"></div>
            </div>
            <div style="text-align:center; color:#00f; font-size:10px; margin-top:5px;" id="wifi-pct">0%</div>
        </div>
    </div>

    <div id="screen-phone-input" class="screen">
         <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <h2 style="color:#e67e22;"><i class="fas fa-mobile-alt"></i> PHONE</h2>
            <i class="fas fa-arrow-left" onclick="goToScreen('screen-main')"></i>
        </div>
        
        <input type="tel" id="phone-target" class="hacker-input" placeholder="أدخل رقم الهاتف أو IP" style="border-color: #e67e22;">
        
        <div style="display:flex; gap:10px; margin-bottom:15px;">
            <button class="hacker-btn" style="font-size:10px; border:1px solid #333;">Android</button>
            <button class="hacker-btn" style="font-size:10px; border:1px solid #333;">iOS (iPhone)</button>
        </div>

        <button class="hacker-btn btn-orange" onclick="startPhoneHack()">بدء الاختراق (Exploit)</button>

        <h3 style="color:#555; font-size: 10px; margin: 20px 0 5px;">ACCESS TOOLS:</h3>
        <div class="control-card" onclick="checkVipFeature('sms')"><span style="color:#fff"><i class="fas fa-comment-alt" style="color:#e67e22"></i> سحب الرسائل (SMS)</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('logs')"><span style="color:#fff"><i class="fas fa-phone" style="color:#e67e22"></i> سجل المكالمات</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('gallery')"><span style="color:#fff"><i class="fas fa-images" style="color:#e67e22"></i> سحب الصور</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('cam')"><span style="color:#fff"><i class="fas fa-video" style="color:#e67e22"></i> فتح الكاميرا</span><i class="fas fa-lock"></i></div>
        <div class="control-card" onclick="checkVipFeature('loc')"><span style="color:#fff"><i class="fas fa-map-marker-alt" style="color:#e67e22"></i> الموقع المباشر (GPS)</span><i class="fas fa-lock"></i></div>
    </div>

    <div id="screen-phone-sim" class="screen" style="padding: 0; background:#000;">
        <div style="padding: 10px; background: #221100; border-bottom: 1px solid #e67e22; display:flex; justify-content:space-between;">
            <span style="color:#fff;">INJECTOR</span>
            <span style="color:#e67e22;">ROOTING...</span>
        </div>
        <div class="attack-terminal" style="border:none; border-bottom:1px solid #e67e22;">
            <div id="phone-logs" class="attack-logs" style="color:#e67e22;"></div>
        </div>
        <div style="padding:20px;">
            <div class="attack-progress-box" style="border-color:#e67e22;">
                <div id="phone-fill" class="attack-fill" style="background: #e67e22; box-shadow: 0 0 10px #e67e22;"></div>
            </div>
             <div style="text-align:center; color:#e67e22; font-size:10px; margin-top:5px;" id="phone-pct">0%</div>
        </div>
    </div>

    <div id="screen-app-hack" class="screen">
        <i class="fas fa-arrow-left back-btn" style="position:absolute; top:20px; right:20px; font-size:20px;" onclick="goToScreen('screen-main')"></i>
        <div style="text-align:center; margin-bottom:20px;">
            <i class="fas fa-users-cog" style="font-size:40px; color:#9b59b6;"></i>
            <h2 style="color:#9b59b6;">GHOST RAT</h2>
            <p style="color:#555; font-size:10px;">Remote Administration Tool</p>
        </div>

        <div style="background:#1a0520; border:1px solid #9b59b6; border-radius:10px; padding:15px; margin-bottom:15px; cursor:pointer;" onclick="window.open('https://top4top.io/downloadf-3613rvelx1-apk.html')">
            <div style="display:flex; justify-content:space-between; align-items:center; color:#d48fea;">
                <span><i class="fas fa-user-shield"></i> تحميل تطبيق الأدمن</span>
                <span style="font-size:10px; border:1px solid #d48fea; padding:2px 5px; border-radius:4px;">Controller</span>
            </div>
        </div>

        <div style="background:#200505; border:1px solid #e74c3c; border-radius:10px; padding:15px; cursor:pointer;" onclick="window.open('https://top4top.io/downloadf-3613uiq0r1-apk.html')">
            <div style="display:flex; justify-content:space-between; align-items:center; color:#e74c3c;">
                <span><i class="fas fa-user-injured"></i> تحميل تطبيق الضحية</span>
                <span style="font-size:10px; border:1px solid #e74c3c; padding:2px 5px; border-radius:4px;">Payload</span>
            </div>
        </div>

        <div style="width: 100%; border-top: 1px dashed #333; margin: 20px 0;"></div>

        <h3 style="color:#0f0; text-align: center; margin-bottom: 5px; font-size: 14px;">MEMBER FEATURES (FREE ACCESS)</h3>
        
        <div class="features-grid">
            <div class="free-feature-card"><i class="fas fa-comment-alt"></i> سحب الرسائل</div>
            <div class="free-feature-card"><i class="fas fa-phone"></i> سجل المكالمات</div>
            <div class="free-feature-card"><i class="fas fa-camera"></i> فتح الكاميرا</div>
            <div class="free-feature-card"><i class="fas fa-map-marker-alt"></i> تحديد الموقع</div>
            <div class="free-feature-card"><i class="fas fa-folder-open"></i> مدير الملفات</div>
            <div class="free-feature-card"><i class="fas fa-microphone"></i> تسجيل الصوت</div>
            <div class="free-feature-card"><i class="fab fa-whatsapp"></i> واتساب الضحية</div>
            <div class="free-feature-card"><i class="fas fa-bomb"></i> فورمات الهاتف</div>
        </div>
    </div>

    <div id="target-check-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="loading-spinner" style="border: 4px solid #333; border-top: 4px solid #fff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
            <h3 id="check-title" style="color:#fff;">CHECKING...</h3>
            <div id="check-status" style="color:#aaa; font-size:12px; margin-top:10px;">Ping: 45ms</div>
            <button id="confirm-btn" class="hacker-btn btn-green" style="display:none; margin-top:20px;" onclick="proceedAction()">CONFIRM</button>
        </div>
    </div>

    <div id="vip-modal" class="modal-overlay">
        <div class="modal-box">
            <i class="fas fa-lock" style="font-size:40px; color:#e74c3c; margin-bottom:15px;"></i>
            <h3 style="color:#fff;">LOCKED FEATURE</h3>
            <p style="color:#888; font-size:11px; margin-bottom:20px;">هذه الأداة متاحة فقط للأعضاء VIP.</p>
            <button onclick="openPayment()" class="hacker-btn btn-red" style="font-size:12px;">شراء المفتاح (LIFETIME)</button>
            <div style="display:flex; gap:5px; margin-top:10px;">
                <input type="text" id="vip-code" class="hacker-input" placeholder="Enter Code" style="margin:0; font-size:12px;">
                <button onclick="validateVip()" class="hacker-btn" style="width:auto; margin:0; background:#333; color:#fff;">OK</button>
            </div>
            <div style="margin-top:10px; font-size:10px; color:#555; cursor:pointer;" onclick="closeVip()">إلغاء</div>
        </div>
    </div>

    <div id="success-overlay" class="modal-overlay" style="background:rgba(0,0,0,0.9);">
        <i class="fas fa-check-circle" style="font-size:70px; color:#0f0; margin-bottom:20px;"></i>
        <h2 style="color:#fff;">SUCCESS</h2>
        <p id="success-txt" style="color:#aaa;">تم الاختراق بنجاح</p>
    </div>

    <div id="payment-frame" class="payment-iframe-container">
        <div style="height:40px; background:#f1f1f1; display:flex; align-items:center; justify-content:space-between; padding:0 10px;">
            <span style="color:#000; font-size:12px;"><b>Secure Payment</b></span> 
            <button onclick="closePayment()" style="background:none; border:none; font-weight:bold; font-size:16px;">✕</button>
        </div>
        <iframe id="pay-iframe" src=""></iframe>
    </div>

    <div class="hacker-footer">
        <span>IP: <span id="user-ip">...</span></span>
        <span>STATUS: <span style="color:#0f0;">CONNECTED</span></span>
    </div>

    <script>
        /* --- CONFIGURATION --- */
        const VIP_KEY = "101010";
        const PAY_LINK = "https://linkbio.co/s/6370-37313132323135795978344E6D517A2z";
        let isVip = localStorage.getItem('ghost_vip') === 'true'; 
        let selectedWifiTarget = null;
        let currentActionType = '';

        /* --- AUDIO SYSTEM --- */
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            try {
                if (audioCtx.state === 'suspended') audioCtx.resume();
                
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                const now = audioCtx.currentTime;

                if(type === 'click') {
                    osc.type = 'sine'; osc.frequency.setValueAtTime(800, now); osc.frequency.exponentialRampToValueAtTime(300, now + 0.1);
                    gain.gain.setValueAtTime(0.1, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(now); osc.stop(now + 0.1);
                } else if (type === 'error') {
                    osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, now);
                    gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.3);
                    osc.start(now); osc.stop(now + 0.3);
                } else if (type === 'success') {
                    osc.type = 'sine'; osc.frequency.setValueAtTime(600, now); osc.frequency.linearRampToValueAtTime(1200, now + 0.2);
                    gain.gain.setValueAtTime(0.1, now);
                    osc.start(now); osc.stop(now + 0.4);
                }
            } catch(e) { console.log("Audio blocked"); }
        }

        /* --- NAVIGATION --- */
        function goToScreen(id) {
            playSound('click');
            document.body.classList.add('glitch-effect');
            setTimeout(()=> document.body.classList.remove('glitch-effect'), 200);
            
            document.querySelectorAll('.screen').forEach(s => {
                s.style.opacity = 0;
                setTimeout(() => s.classList.remove('active-screen'), 300);
            });
            
            setTimeout(() => {
                const target = document.getElementById(id);
                target.classList.add('active-screen');
                setTimeout(()=> target.style.opacity = 1, 50);
            }, 300);
        }

        function showToast(msg, bg) {
            if(bg === '#f00') playSound('error');
            const t = document.getElementById('toast');
            t.innerHTML = msg; t.style.background = bg; t.style.top = "20px";
            setTimeout(() => t.style.top = "-60px", 3000);
        }

        /* --- LOGIC --- */
        function prepareTarget(type) {
            playSound('click');
            const inpId = type === 'spy' ? 'spy-number' : 'ban-number';
            const val = document.getElementById(inpId).value;
            if(val.length < 5) { showToast("أدخل رقماً صحيحاً", "#f00"); return; }
            
            currentActionType = type;
            document.getElementById('target-check-modal').style.display = 'flex';
            document.getElementById('check-title').innerText = "SEARCHING...";
            document.getElementById('check-status').innerText = "Connecting to server...";
            document.getElementById('confirm-btn').style.display = 'none';

            setTimeout(() => {
                document.getElementById('check-title').innerText = "TARGET FOUND";
                document.getElementById('check-status').innerHTML = "Status: <span style='color:#0f0'>ONLINE</span><br>Encryption: WEAK";
                document.getElementById('confirm-btn').style.display = 'inline-block';
                playSound('success');
            }, 2500);
        }

        function proceedAction() {
            document.getElementById('target-check-modal').style.display = 'none';
            checkVipFeature(currentActionType);
        }

        function searchWifi() {
            playSound('click');
            const list = document.getElementById('wifi-list');
            list.style.display = 'none';
            showToast("جاري البحث...", "#00f");
            setTimeout(() => {
                list.style.display = 'block';
                playSound('success');
            }, 2000);
        }

        function selectWifi(el, name) {
            document.querySelectorAll('.control-card').forEach(c => c.style.background = '#0f0f0f');
            el.style.background = '#000044';
            selectedWifiTarget = name;
            playSound('click');
        }

        function startWifiHack() {
            playSound('click');
            if(!selectedWifiTarget) { showToast("اختر شبكة أولاً", "#f00"); return; }
            if(!isVip && Math.random() > 0.7) { checkVipFeature('wifi'); return; } 
            
            goToScreen('screen-wifi-sim');
            document.getElementById('wifi-target-name').innerText = selectedWifiTarget;
            
            const logs = [
                "Initialising handshake...", "Capturing packets...", "IVs: 2345/50000", "Deauth sent...", 
                "Handshake captured!", "Brute-forcing WPA2...", "Dictionary attack: started", "Trying: admin123", "Trying: 12345678"
            ];
            runTerminal('wifi-logs', 'wifi-fill', 'wifi-pct', logs, '#00f', () => {
                showSuccess("PASSWORD: " + Math.floor(Math.random()*100000000), () => goToScreen('screen-wifi-input'));
            });
        }

        function startPhoneHack() {
            playSound('click');
            const val = document.getElementById('phone-target').value;
            if(val.length < 3) { showToast("أدخل الهدف", "#f00"); return; }
            
            goToScreen('screen-phone-sim');
            const logs = [
                "Pinging target...", "Port 80: OPEN", "Port 443: OPEN", "Exploiting CVE-2023...", 
                "Bypassing Firewall...", "Uploading payload...", "Installing Backdoor...", "Root Access: GRANTED"
            ];
            runTerminal('phone-logs', 'phone-fill', 'phone-pct', logs, '#e67e22', () => {
                showSuccess("DEVICE CONNECTED", () => {
                    goToScreen('screen-phone-input');
                    showToast("تم فتح أدوات التحكم", "#e67e22");
                });
            });
        }

        function runTerminal(logId, barId, pctId, messages, color, onComplete) {
            const logDiv = document.getElementById(logId);
            const bar = document.getElementById(barId);
            const pct = document.getElementById(pctId);
            logDiv.innerHTML = "";
            bar.style.width = "0%";
            pct.innerText = "0%";
            
            let i = 0;
            let progress = 0;
            
            function addLine() {
                if(i >= messages.length) {
                    bar.style.width = "100%";
                    pct.innerText = "100%";
                    setTimeout(onComplete, 1000);
                    return;
                }
                
                const p = document.createElement('div');
                p.style.marginBottom = "2px";
                p.style.borderBottom = "1px solid rgba(255,255,255,0.05)";
                p.style.color = color;
                p.innerText = "> " + messages[i];
                logDiv.appendChild(p);
                logDiv.scrollTop = logDiv.scrollHeight; 
                
                progress += (100 / messages.length);
                bar.style.width = progress + "%";
                pct.innerText = Math.floor(progress) + "%";
                
                i++;
                setTimeout(addLine, 600); 
            }
            addLine();
        }

        function showSuccess(msg, cb) {
            playSound('success');
            document.getElementById('success-txt').innerText = msg;
            document.getElementById('success-overlay').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('success-overlay').style.display = 'none';
                cb();
            }, 3000);
        }

        /* --- VIP SYSTEM --- */
        function updateVipUI() {
            if(isVip) {
                document.getElementById('vip-badge').innerText = "PREMIUM USER";
                document.getElementById('vip-badge').style.color = "#FFD700"; 
            }
        }

        function checkVipFeature(feature) {
            if(isVip) {
                showToast("جاري فتح الأداة...", "#0f0");
            } else {
                document.getElementById('vip-modal').style.display = 'flex';
                playSound('error');
            }
        }

        function validateVip() {
            const input = document.getElementById('vip-code').value;
            if(input === VIP_KEY) {
                isVip = true;
                localStorage.setItem('ghost_vip', 'true'); 
                updateVipUI();
                closeVip();
                showSuccess("VIP ACTIVATED", () => {});
            } else {
                showToast("الكود غير صحيح", "#f00");
            }
        }

        function closeVip() { document.getElementById('vip-modal').style.display = 'none'; }
        function openPayment() { document.getElementById('pay-iframe').src = PAY_LINK; document.getElementById('payment-frame').style.display = 'flex'; }
        function closePayment() { document.getElementById('payment-frame').style.display = 'none'; }

        /* --- INITIALIZATION --- */
        window.onload = () => {
            updateVipUI();
            document.getElementById('user-ip').innerText = "192.168." + Math.floor(Math.random()*255) + ".X";
        };

    </script>
</body>
</html>
